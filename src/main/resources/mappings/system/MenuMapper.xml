<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.root.cognition.system.dao.MenuDao">

    <select id="loginway" resultType="com.root.cognition.system.entity.User">
        SELECT
        <include refid="menuColumns"/>
        FROM sys_user a
        WHERE (a.user_name = #{userName} OR a.user_email = #{userEmail} OR a.user_mobile = #{userMobile})
    </select>

    <select id="listMenuByUserId" resultType="com.root.cognition.system.entity.Menu"></select>

    <select id="listUserPerms" resultType="java.lang.String"></select>


    <!-- 根据id获得用户 -->
    <select id="get" parameterType="string" resultType="com.root.cognition.system.dao.UserDao">
        SELECT
        <include refid="menuColumns"/>
        FROM sys_menu a
        WHERE a.id = #{id}
    </select>

    <select id="getByEntity" parameterType="com.root.cognition.system.dao.UserDao"
            resultType="com.root.cognition.system.dao.UserDao">
        SELECT
        <include refid="menuColumns"/>
        FROM sys_user a
        <where>
            a.del_flag = #{DEL_FLAG_NORMAL}
            <if test="id !=null and id !=''">
                AND a.id = #{id}
            </if>
            <if test="userName !=null and userName !=''">
                AND a.user_name = #{menuNumber}
            </if>
            <if test="userEmail !=null and userEmail!=''">
                AND a.user_email = #{parentId}
            </if>
            <if test="userMobile !=null and userMobile!=''">
                AND a.user_mobile = #{menuPerms}
            </if>
        </where>
    </select>

    <sql id="menuColumns">
      menu_number AS  "menuNumber",
      parent_id   AS  "parentId",
      menu_name   AS  "menuName",
      menu_url    AS  "menuUrl",
      menu_parms  AS  "menuPerms",
      menu_type   AS  "menuType",
      menu_icon   AS  "menuIcon",
      order_num   AS  "orderNum"
    </sql>
</mapper>